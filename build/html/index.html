
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to fruitpal’s documentation! &#8212; fruitpal 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Models" href="modules/models.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modules/models.html" title="Models"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">fruitpal 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to fruitpal’s documentation!</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-fruitpal-s-documentation">
<h1>Welcome to fruitpal’s documentation!<a class="headerlink" href="#welcome-to-fruitpal-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>This Django Rest-Framework application was developed with Python 3.8,
but it will probably work with any Python version &gt;= 3.6.  In the code
samples below, python3.8 can be replaced with python3.6 or python3.7.</p>
<a class="reference external image-reference" href="https://fruitpal.stefanzero.com/static/project-fruitpal.jpg"><img alt="Project Fruitpal" src="https://fruitpal.stefanzero.com/static/project-fruitpal.jpg" /></a>
<a class="reference external image-reference" href="https://fruitpal.stefanzero.com/static/project-fruitpal-2.jpg"><img alt="Project Fruitpal-2" src="https://fruitpal.stefanzero.com/static/project-fruitpal-2.jpg" /></a>
<a class="reference external image-reference" href="https://fruitpal.stefanzero.com/static/project-fruitpal-3.jpg"><img alt="Project Fruitpal-3" src="https://fruitpal.stefanzero.com/static/project-fruitpal-3.jpg" /></a>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Clone the Github repo in a directory of your choice.</p>
<p>git clone <a class="reference external" href="https://github.com/stefanzero/fruitpal.git">https://github.com/stefanzero/fruitpal.git</a></p>
</li>
<li><p>Create a virtual environment, activate it, then install
all dependencies</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> fruitpal
python3.8 -m venv fruitpal-env
<span class="nb">source</span> fruitpal-env/bin/activate
pip install -r requirements.txt
</pre></div>
</div>
</li>
<li><p>Run the server on your local machine</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3.8 manage.py runserver
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="project-organization">
<h2>Project Organization<a class="headerlink" href="#project-organization" title="Permalink to this headline">¶</a></h2>
<p>After cloning the git repo, the following directories are created:</p>
<ul>
<li><p>fruitpal</p>
<p>This contains the main Django application, that contains the settings
(settings.py), web server python interface (wsgi.py), and main
URL path configurations (urls.py)</p>
</li>
<li><p>fruit_app</p>
<p>This is the Django application which contains the specific Models and
Views for the API.</p>
</li>
<li><p>static</p>
<p>Django STATIC_ROOT directory, where static files from installed
packages such as REST_FRAMEWORK are copied to by the admin command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3.8 manage.py collectstatic
</pre></div>
</div>
<p>For convenience, these files have already been included in the git
repo and the collectstatic does not need to be run.</p>
</li>
<li><p>staticfiles</p>
<p>Directory in settings.STATICFILES_DIRS, where other static assets can
be deployed from.</p>
</li>
<li><p>docs</p>
<p>This project is documented using the Python Sphinx package.  The docs
directory contains the configuration files and .rst files
(restructured text) for Sphinx.</p>
</li>
<li><p>build</p>
<p>This directory contains the output HTML files from Sphinx.</p>
</li>
</ul>
<p>The main directory includes a number of Bash scripts and configuration
files:</p>
<ul>
<li><p>install.sh</p>
<p>Creates the virtual environment</p>
</li>
<li><p>create_docs.sh</p>
<p>Runs Sphinx to create the documentation.</p>
</li>
<li><p>requirements.txt</p>
<p>The Python packages output from</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip freeze &gt; requirements.txt
</pre></div>
</div>
</li>
<li><p>Makefile</p>
<p>Unix file for the <strong>make</strong> utility for Sphinx.</p>
</li>
<li><p>manage.py</p>
<p>Main entry point for Django.</p>
</li>
<li><p>db.sqlite3</p>
<p>Database file</p>
</li>
</ul>
</div>
<div class="section" id="data-schema">
<h2>Data Schema<a class="headerlink" href="#data-schema" title="Permalink to this headline">¶</a></h2>
<p>As described above in the section “Project Fruitpal API”, the main data
consists of an array of values for each Commodity Data item:</p>
<ul class="simple">
<li><p>COUNTRY</p></li>
<li><p>COMMODITY</p></li>
<li><p>FIXED_OVERHEAD</p></li>
<li><p>VARIABLE_COST</p></li>
</ul>
<p>where COUNTRY is the standard 2-letter country code.  The standard list
of world countries rarely changes (South Sudan was the last addition),
so it is easy to create a table to contain all the country codes and
corresponding names.  The list of “commodities” is highly subjective to
change, and while a table could be made to contain these, at this time,
the data schema simply uses a string to represent the commodity.</p>
<p>For this project, the data schema consists of only 2 tables:</p>
<p>COUNTRY</p>
<ul class="simple">
<li><p>country_code (2-letter string, primary key)</p></li>
<li><p>name (varchar, max length 64)</p></li>
</ul>
<p>COMMODITY_DATA</p>
<ul class="simple">
<li><p>id (int)</p></li>
<li><p>country_code (as a Foreign key to the COUNTRY table)</p></li>
<li><p>commodity (varchar, max length 256)</p></li>
<li><p>fixed_overhead (decimal 8.2)</p></li>
<li><p>variable_cost (decimal 8.2)</p></li>
</ul>
<p>The COMMODITY_DATA table has a constraint that the combination of
country_code and commodity must be unique.  Since COMMODITY_DATA
requires a foreign key to the COUNTRY table, the COUNTRY table is first
fully populated before items are entered into COMMODITY_DATA.</p>
</div>
<div class="section" id="sample-project-data">
<h2>Sample Project Data<a class="headerlink" href="#sample-project-data" title="Permalink to this headline">¶</a></h2>
<p>Several auxiliary programs are included that populate the database with
sample data.  These programs and their input data files are in the
directory <strong>fruitapp/scripts</strong> and <strong>fruitapp/scripts/sample_data</strong>.  The
web site “delishably” was scraped to get a list of all “fruits”, and
used to create the sample data file “commodity-data.json”.   Wikipedia
was to get a list of every country 2-letter code and country name.</p>
<p>The Django package <strong>django-extensions</strong> is used to allow manage.py
to execute Python “scripts” which actually load the data.  These have
already been run (and do not need to be run again), and the resulting
data is in the file db.sqlite3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3.8 manage.py runscript add_countries
python3.8 manage.py runscript create_commodity_data --script-args <span class="nv">num_countries</span><span class="o">=</span><span class="m">5</span> <span class="nv">num_fruits</span><span class="o">=</span><span class="m">40</span>
python3.8 manage.py runscript add_commodity_data
</pre></div>
</div>
<p>The values in the sample file “commodity-data.json” was created using
random values for fixed_overhead and variable_cost.  Each commodity has
5 random countries chosen to create this sample file.  To test that
the sample API result for the “calculate” endpoint matches
the result for “mango”, the sample file commodity-data.json does not
have any entries for mango.  Instead a separate Django script is used
to load the values from the project description.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3.8 manage.py runscript add_mangos
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>The Unit Tests are in the directory fruit_app/tests for testing the
models and the views.  They are run by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3.8 manage.py <span class="nb">test</span>
</pre></div>
</div>
</div>
<div class="section" id="deployment-and-urls">
<h2>Deployment and URLs<a class="headerlink" href="#deployment-and-urls" title="Permalink to this headline">¶</a></h2>
<p>This Django Project has been deployed at:</p>
<p><a class="reference external" href="https://fruitpal.stefanzero.com">https://fruitpal.stefanzero.com</a></p>
<p>The relative URLs are:</p>
<ul>
<li><p>/</p>
<p>Project landing page with links to API URLs</p>
</li>
<li><p>/static/html/index.html</p>
<p>Documentation</p>
</li>
<li><p>/api/v1/commoditydata/<span class="raw-html-m2r"><pk></span></p>
<p>GET, DELETE and UPDATE for a given primary key (id) of a commoditydata item</p>
</li>
<li><p>/api/v1/commiditydata</p>
<p>GET and POST for all items in commoditydata table</p>
</li>
<li><p>/api/v1/countries/<span class="raw-html-m2r"><country_code></span></p>
<p>GET, DELETE and UPDATE for a given country_code of a country item</p>
</li>
<li><p>/api/v1/countries</p>
<p>GET and POST for all items in countries table</p>
</li>
<li><p>/api/v1/calculate/?COMMODITY=commodity&amp;TONS=tons&amp;PRICE=price</p>
<p>GET to calculate trade data for query parameters COMMODITY, TONS, and
PRICE</p>
</li>
</ul>
</div>
</div>
<div class="section" id="code-documentation">
<h1>Code Documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/models.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules/models.html#country-model">Country Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/models.html#commoditydata-model">CommodityData Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules/views.html">Views</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to fruitpal’s documentation!</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#project-organization">Project Organization</a></li>
<li><a class="reference internal" href="#data-schema">Data Schema</a></li>
<li><a class="reference internal" href="#sample-project-data">Sample Project Data</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#deployment-and-urls">Deployment and URLs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code-documentation">Code Documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="modules/models.html"
                        title="next chapter">Models</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modules/models.html" title="Models"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">fruitpal 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to fruitpal’s documentation!</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Stefan Musarra.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>